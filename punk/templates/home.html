{% extends "base.html" %}
{% block content %}
<div id="main">
    <div class="header">
        <h1>NIKTOONION</h1>
        <div class="user-header">
            <img src="data:image/png;base64,{{ user.avatar }}" class="avatar" style="width: 32px; height: 32px;">
            <span style="color: #d9d9d9;">{{ user.display_name }}</span>
            <a href="{{ url_for('profile') }}" style="color: #19cf86; margin-left: 10px;">Профиль</a>
        </div>
    </div>

    <form id="home-form" action="/" method="post" class="form-container">
        <div class="form-group">
            <label>Присоединиться к комнате</label>
            <div class="input-group">
                <input type="text" name="code" id="code" placeholder="Код комнаты" value="{{ code or '' }}">
                <button type="submit" name="join" id="join-button" value="join">Войти</button>
            </div>
        </div>

        <div class="form-group">
            <label>Создать комнату</label>
            <input type="text" name="title" id="title" placeholder="Название комнаты (необязательно)" class="title-input">
            <label class="inline checkbox-group">
                <input type="checkbox" name="is_public" id="is_public"> Публичная комната
            </label>
            <div class="input-group">
                <button type="submit" name="create" value="create">Создать</button>
            </div>
        </div>

        {% if error %}
        <p class="error">{{ error }}</p>
        {% endif %}
    </form>

    <div class="public-rooms-section">
        <h2>Публичные комнаты</h2>
        <div id="public-rooms" class="room-list">
            <em>Загрузка публичных комнат…</em>
        </div>
    </div>
</div>

<style>
.user-header {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    margin-top: 10px;
}
</style>
{% endblock %}